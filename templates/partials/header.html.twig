{% set route_name = app.request.attributes.get('_route') %}

{% block nav %}
    <header>
        <div class="logo">
            <a href="{{ path('homepage') }}" >
                <img src="{{ asset('img/site/cat-logo.png') }}" alt="Illustration d'un chat contenant un coeur lumineux">
                <h1>Le Charnet de Santé</h1>
            </a>
        </div>
        {% if is_granted("ROLE_USER") %}
        <div class="desktop-auth">
            <a href="
                {% if is_granted("ROLE_ADMIN")%}
                    {{ path('admin-interface') }}
                {% elseif is_granted("ROLE_USER") %}
                    {{ path('user-interface') }}
                {% endif %}">
                <div class="user-avatar">
                    <img 
                        {% if app.user.picture != null %} 
                            src="{{ asset('img/upload/' ~ app.user.picture) }}" 
                            alt="Photo de profil de {{ app.user.username }}" class="user-picture" 
                        {% else %} 
                            src="{{ asset('img/site/cat-portrait.png') }}" 
                            alt="Illustration portrait de chat" 
                        {% endif %}
                    >
                </div>
                <h2>Bienvenue {{ app.user.username }}</h2>
            </a>
        </div>
        {% endif %} 
        <nav>
            {% if is_granted("ROLE_USER") %}
            <div class="mobile-menu">
                <div class="burger-button" id="burger-btn">
                    <div class="bar1"></div>
                    <div class="bar2"></div>
                    <div class="bar3"></div>
                </div>
                <ul class="burger-nav">
                    <div class="long-line"></div>
                    <li class="mobile-auth">
                        <a href="
                            {% if is_granted("ROLE_ADMIN")%}
                                {{ path('admin-interface') }}
                            {% elseif is_granted("ROLE_USER") %}
                                {{ path('user-interface') }}
                            {% endif %}">
                            <div class="user-avatar">
                                <img 
                                    {% if app.user.picture != null %} 
                                        src="{{ asset('img/upload/' ~ app.user.picture) }}" 
                                        alt="Photo de profil de {{ app.user.username }}" 
                                        class="user-picture" 
                                    {% else %} 
                                        src="{{ asset('img/site/cat-portrait.png') }}" 
                                        alt="Illustration portrait de chat" 
                                    {% endif %}
                                >
                            </div>
                            <h2>Bienvenue {{ app.user.username }}</h2>
                        </a>
                    </li>
                    <div class="long-line"></div>
                    <li {% if route_name == 'user-account' %} class="active" {% endif %}>
                        <a href="{{ path('user-account') }}">Mon Compte</a>
                    </li>
                    <div class="line"></div>
                    <li {% if route_name == 'cat-list' or route_name == 'admin-users' %} class="active" {% endif %}>
                        <a href="
                            {% if is_granted("ROLE_ADMIN")%}
                                {{ path('admin-users') }}
                            ">Utilisateurs
                        </a>
                    </li>
                            {% elseif is_granted("ROLE_USER") %}
                                {{ path('cat-list') }}
                            ">Mes Chats
                        </a>
                    </li>{% endif %}
                    <div class="line"></div>
                    <li {% if route_name == 'help' %} class="active" {% endif %}>
                        <a href="
                            {% if is_granted("ROLE_ADMIN")%}
                            
                            ">F.A.Q
                        </a>
                    </li>
                            {% elseif is_granted("ROLE_USER") %}
                                {{ path('help') }}
                            ">Mode d'emploi
                        </a>
                    </li>{% endif %}
                    <div class="line"></div>
                    <li {% if route_name == 'logout' %} class="active" {% endif %}><a href="{{ path('logout') }}">Déconnexion</a></li>
                    <div class="line"></div>
                </ul>
            </div>
            <div id="desktop-menu" class="custom-select-wrapper">
                <div class="custom-select">
                    <div class="custom-select_trigger"><span>MENU</span>
                        <div class="menu-arrow"></div>
                    </div>
                </div>
                <ul class="custom-options">
                    <div class="long-line"></div>
                    <li {% if route_name == 'user-account' %} class="selected custom-option" {% else %} class="custom-option" {% endif %}>
                        <a href="{{ path('user-account') }}">Mon Compte</a>
                    </li>
                    <div class="long-line"></div>
                    <li {% if route_name == 'cat-list' or route_name == 'admin-users' %} class="selected custom-option" {% else %} class="custom-option" {% endif %}>
                        <a href="
                            {% if is_granted("ROLE_ADMIN")%}
                                {{ path('admin-users') }}
                            ">Utilisateurs
                        </a>
                    </li>
                            {% elseif is_granted("ROLE_USER") %}
                                {{ path('cat-list') }}
                            ">Mes Chats
                        </a>
                    </li>{% endif %}
                    <div class="long-line"></div>
                    <li {% if route_name == 'help' %} class="selected custom-option" {% else %} class="custom-option" {% endif %}>
                        <a href="
                            {% if is_granted("ROLE_ADMIN")%}
                            
                            ">F.A.Q
                        </a>
                    </li>
                            {% elseif is_granted("ROLE_USER") %}
                                {{ path('help') }}
                            ">Mode d'emploi
                        </a>
                    </li>{% endif %}
                    <div class="long-line"></div>
                    <li {% if route_name == 'logout' %} class="selected custom-option" {% else %} class="custom-option" {% endif %}>
                        <a href="{{ path('logout') }}">Déconnexion</a>
                    </li>
                    <div class="long-line"></div>
                </ul>
            </div>
            {% else %}
            <ul class="default-nav">
                <li class="login-btn"><a href="{{ path('login') }}">Connexion</a></li>
                <li class="register"><a href="{{ path('registration') }}">Inscription</a></li>
            </ul>
            {% endif %} 
        </nav>
    </header>
{% endblock %}